using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class RankingManager : Singleton<RankingManager>
{
    private bool isObjectObtained;
    private bool gameStarted;

    public int[] levelRank;
    public float[] levelTimeStandard;
    public float timer;

    public int clearedLevelIndex;

	void Start ()
    {
        levelRank = new int[12];
        levelTimeStandard = new float[12];

        for (int i = 0; i < levelRank.Length; i++)        
            levelRank[i] = 0;

        levelTimeStandard[0] = 1000f;
        levelTimeStandard[1] = 25f;
        levelTimeStandard[2] = 37f;
        levelTimeStandard[3] = 1000f;
        levelTimeStandard[4] = 45f;
        levelTimeStandard[5] = 50f;
        levelTimeStandard[6] = 1000f;
        levelTimeStandard[7] = 50f;
        levelTimeStandard[8] = 50f;
        levelTimeStandard[9] = 28f;
        levelTimeStandard[10] = 50f;
        levelTimeStandard[11] = 100f;

    }

    void Update()
    {        
        if (gameStarted == true)
        {            
            timer += Time.deltaTime;
        }
    }

    public void GameStart()
    {            
        isObjectObtained = false;
        timer = 0;
        gameStarted = true;
    }

    public int GameEnd(int levelIndex)
    {
        int rank = 1;
        gameStarted = false;

        clearedLevelIndex = levelIndex;

        if (timer < levelTimeStandard[levelIndex - 1])        
            rank++;
        
        if(isObjectObtained == true)
            rank++;

        levelRank[levelIndex - 1] = rank;
       
        Debug.Log(levelRank[levelIndex - 1]);

        return rank;
    }

    public void ObtainObject()
    {
        isObjectObtained = true;
    }
}
