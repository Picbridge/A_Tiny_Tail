using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Catapult_ShootCharacter : MonoBehaviour
{
    GameObject catapult;
    GameObject destination;

    Vector3 catapultPos;
    Vector3 destinationPos;
    bool isOccupied;

    public Character capturedCharacter;
    public bool isCharacterEntered;
    public bool isButtonPressed;

    // Use this for initialization
    void Start ()
    {
        catapult = transform.GetChild(0).gameObject;
        destination = transform.GetChild(1).gameObject;

        catapultPos = catapult.GetComponent<Transform>().position;
        destinationPos = destination.GetComponent<Transform>().position;

        isOccupied = false;
        isCharacterEntered = false;
        isButtonPressed = false;
    }
	
	// Update is called once per frame
	void Update ()
    {
        if (!isOccupied && isCharacterEntered)
        {
            Debug.Log("Character in");
            capturedCharacter.transform.position = new Vector3(catapultPos.x,
                                                               transform.position.y,
                                                               catapultPos.z);
            isOccupied = true;
        }

        if (isOccupied && isButtonPressed)
        {
            capturedCharacter.transform.position = new Vector3(destinationPos.x,
                                                               transform.position.y,
                                                               destinationPos.z);

            isOccupied = false;
        }
	}
}
